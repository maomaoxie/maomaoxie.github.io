<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Mawchu 貓奴前端的天空</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="google-site-verification" content="qpdwAFMt_HNGP0dM45CxVBDie_HVPkWFvpclpqZaoIo" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<link href="/en/index.html" rel="alternate" hreflang="en" />
    


<meta name="description" content="Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習">



<meta name="keywords" content="mawchu、謝佳芳、毛球、網頁、前端、Javascript、Vue、Laravel、SEO、平面設計、貓咪">



    <meta name="description" content="Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習">
<meta property="og:type" content="website">
<meta property="og:title" content="Mawchu 貓奴前端的天空">
<meta property="og:url" content="http://maomaoxie.github.io/index.html">
<meta property="og:site_name" content="Mawchu 貓奴前端的天空">
<meta property="og:description" content="Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Mawchu 謝佳芳">
<meta property="article:tag" content="mawchu、謝佳芳、毛球、網頁、前端、Javascript、Vue、Laravel、SEO、平面設計、貓咪">
<meta name="twitter:card" content="summary">



<link rel="alternative" href="/atom.xml" title="Mawchu 貓奴前端的天空" type="application/atom+xml">



<link rel="icon" type="image/x-icon" href="/favicon.svg">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8832218493331944" crossorigin="anonymous"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">



<link rel="stylesheet" href="/css/style.css">


<script src="https://kit.fontawesome.com/76e3351334.js" crossorigin="anonymous"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 6.0.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container custom-nav">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo position-relative" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">文章
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/categories">分類
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/tags">標籤
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/zh-tw/about">關於
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/zh-tw/subscribe">訂閱
               <div class="position-absolute bar"></div>
            </a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜尋" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/mawchu">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2022/11/08/js-weird-parts-closure/" itemprop="url">克服 Javascript 的奇怪部分 IIFE 與 閉包</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-11-08T03:06:33.000Z" itemprop="datePublished">11月 8 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            4 分鐘 讀完 (約 616 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <!-- <html><head></head><body><h1 id="範圍練（scope-chain）"><a href="#範圍練（scope-chain）" class="headerlink" title="範圍練（scope chain）"></a>範圍練（scope chain）</h1><p>範圍練（scope chain）是立即執行函式（Immediately Invoked Function Expression）與閉包的共同重要觀念，<br>Javascript function 的靜態物理坐落位置（physical position）深深影響著外部環境（outer environments），<br>也取決了那些變數是可以取用（accessible）與共享的。</p>
<p>經典的面試題目 for 迴圈內的變數 i 因為 var 宣告被提升（hoisting）到作用域頂層，<br>在調用 console.log 的時機點之前就已經不斷被覆蓋，無法呈現預期的結果：</p>
<figure class="highlight javascript hljs"><figcaption><span>for loop</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">function</span> <span class="title function_">buildFn</span> () {</span><br><span class="line"><span class="hljs-keyword">var</span> arr = [];</span><br><span class="line"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">3</span>; i++) {</span><br><span class="line">    arr.<span class="title function_">push</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(i)</span><br><span class="line">    })</span><br><span class="line">}</span><br><span class="line"><span class="hljs-keyword">return</span> arr;</span><br><span class="line"><span class="hljs-comment">// loop 執行完畢 i 記憶體儲存的是 3</span></span><br><span class="line"><span class="hljs-comment">// var 會共享同一個記憶體然後不斷覆蓋</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> fns = buildFn ();</span><br><span class="line">fns[<span class="hljs-number">0</span>](); <span class="hljs-comment">// 3</span></span><br><span class="line">fns[<span class="hljs-number">1</span>](); <span class="hljs-comment">// 3</span></span><br><span class="line">fns[<span class="hljs-number">2</span>](); <span class="hljs-comment">// 3</span></span><br></pre></td></tr></tbody></table></figure>

<p>為了解決記憶體內的值只是不斷被同一個指向覆蓋的問題，勢必需要獨立出每個 i 的值，有兩個做法：</p>
<ol>
<li>使用 ES6 Let 更改函式作用域（function scope）為區域作用域（block scope）</li>
<li>使用 IIFE 的閉包特性，以下詳述</li>
</ol>
<h1 id="閉包（closure）"><a href="#閉包（closure）" class="headerlink" title="閉包（closure）"></a>閉包（closure）</h1><p>作用域內的變數可以為閉包所封鎖，結合 IIFE 在創造的當下就呼叫，每跑一次迴圈就產生一個獨立的作用域與執行環境（execution context），<br>將當前的 i 值封鎖住，可以設想為一個迴圈一個 i，並運用閉包的範圍練特性於呼叫的時候查找到正確的記憶體位址：</p>
<figure class="highlight javascript hljs"><figcaption><span>IIFE</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">function</span> <span class="title function_">buildFnIIFE</span> () {</span><br><span class="line">    <span class="hljs-keyword">var</span> arr = [];</span><br><span class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i&lt;<span class="hljs-number">3</span>; i++) {</span><br><span class="line">        <span class="hljs-keyword">let</span> j = i;</span><br><span class="line">        arr.<span class="title function_">push</span>(</span><br><span class="line">            (<span class="hljs-keyword">function</span> (<span class="hljs-params">j</span>) {</span><br><span class="line">                <span class="hljs-comment">// scope chain 查找到閉包立馬執行時封鎖的 i 值</span></span><br><span class="line">                <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) {</span><br><span class="line">                    <span class="variable language_">console</span>.<span class="title function_">log</span>(j);</span><br><span class="line">                }</span><br><span class="line">            }(i))</span><br><span class="line">        )</span><br><span class="line">    }</span><br><span class="line">    <span class="hljs-keyword">return</span> arr; <span class="hljs-comment">// loop 執行完畢 i 記憶體儲存的是 3</span></span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> fnsIIFE = buildFnIIFE ();</span><br><span class="line">fnsIIFE[<span class="hljs-number">0</span>](); <span class="hljs-comment">// 0</span></span><br><span class="line">fnsIIFE[<span class="hljs-number">1</span>](); <span class="hljs-comment">// 1</span></span><br><span class="line">fnsIIFE[<span class="hljs-number">2</span>](); <span class="hljs-comment">// 2</span></span><br></pre></td></tr></tbody></table></figure>

<h1 id="變數共享"><a href="#變數共享" class="headerlink" title="變數共享"></a>變數共享</h1><p>閉包很常搭配工廠函式使用，藉助於閉包的變數共享特色，讓範圍練可以查找到儲存在記憶體位置的值，<br>即便外層的函式已經執行完畢並且離開執行序，仍會遺留變數的記憶體位置提供子函式使用：</p>
<figure class="highlight javascript hljs"><figcaption><span>closure</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">function</span> <span class="title function_">createGal</span> (name) {</span><br><span class="line">    <span class="hljs-keyword">var</span> toyBox = [];</span><br><span class="line">    <span class="hljs-keyword">return</span> <span class="hljs-keyword">function</span> (<span class="hljs-params">...toy</span>) {</span><br><span class="line">        toyBox.<span class="title function_">push</span>(toy);</span><br><span class="line">        <span class="hljs-keyword">const</span> toys = [...toyBox];</span><br><span class="line">        <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="hljs-string">`女孩<span class="hljs-subst">${name}</span>喜歡<span class="hljs-subst">${toys}</span>`</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> buyToyToGalMary = createGal (<span class="hljs-string">'Mary'</span>);</span><br><span class="line"><span class="title function_">buyToyToGalMary</span>(<span class="hljs-string">'玩具熊'</span>);</span><br><span class="line"><span class="title function_">buyToyToGalMary</span>(<span class="hljs-string">'洋娃娃'</span>);</span><br><span class="line"><span class="title function_">buyToyToGalMary</span>(<span class="hljs-string">'吹泡泡'</span>);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">var</span> buyToyToGalAda = createGal (<span class="hljs-string">'Ada'</span>);</span><br><span class="line"><span class="title function_">buyToyToGalAda</span>(<span class="hljs-string">'小火車'</span>);</span><br><span class="line"><span class="title function_">buyToyToGalAda</span>(<span class="hljs-string">'佩佩豬'</span>);</span><br></pre></td></tr></tbody></table></figure>
</body></html> -->
        
        
        <html><head></head><body><h1 id="範圍練（scope-chain）"><a href="#範圍練（scope-chain）" class="headerlink" title="範圍練（scope chain）"></a>範圍練（scope chain）</h1><p>範圍練（scope chain）是立即執行函式（Immediately Invoked Function Expression）與閉包的共同重要觀念，<br>Javascript function 的靜態物理坐落位置（physical position）深深影響著外部環境（outer environments），<br>也取決了那些變數是可以取用（accessible）與共享的。</p>
<p>經典的面試題目 for 迴圈內的變數 i 因為 var 宣告被提升（hoisting）到作用域頂層，<br>在調用 console.log 的時機點之前就已經不斷被覆蓋，無法呈現預期的結果：</p>
            <!--  -->
            <p class="article-more-link">
                <a href="/2022/11/08/js-weird-parts-closure/">more</a>
            </p>
        
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2022/10/13/difference-between-gateway-and-router/" itemprop="url">閘道與路由的基礎介紹</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-10-13T08:50:21.000Z" itemprop="datePublished">10月 13 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            8 分鐘 讀完 (約 1247 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <!-- <html><head></head><body><p>閘道（gateway）與路由（router）在網絡早期的世界裡並無區別，且與 TCP/IP 通訊層有密不可分的關係。<br>在現今發達的網絡世界中逐漸分化了兩者的功能：</p>
<h1 id="閘道（gateway）"><a href="#閘道（gateway）" class="headerlink" title="閘道（gateway）"></a>閘道（gateway）</h1><p>A Gateway, on the other hand, joins dissimilar systems.<br>Gateway it is defined as a network entity that allows a network to interface with another network with different protocols.<br>閘道（gateway）能合併不同的系統，旨在允許不同協定（protocols）的網絡之間互相介接的網路裝置。</p>
<p>Device that converts one protocol or format to another.<br>A network gateway converts packets from one protocol to another.<br>The gateway functions as an entry/exit point to the network.<br>將一種網路協定規格或封包轉換成另一種的裝置。<br>閘道功能當作是進入網絡的節點與進入點。</p>
<h3 id="透過運算轉化規格"><a href="#透過運算轉化規格" class="headerlink" title="透過運算轉化規格"></a>透過運算轉化規格</h3><p>The gateway interprets the system of networks as endpoints from packet to packet.<br>閘道（gateway）的主要任務就是透過運算與轉換將一種協定（protocols）的網絡轉換成另一種，使資料在不同協定之間傳遞不受阻。</p>
<p>A gateway can only operate on five layers.<br>閘道僅能在 OSI 模型的應用層第五層運作。</p>
<h5 id="附加的特色"><a href="#附加的特色" class="headerlink" title="附加的特色"></a>附加的特色</h5><p>network access control, protocol conversion, etc</p>
<h1 id="路由（router）"><a href="#路由（router）" class="headerlink" title="路由（router）"></a>路由（router）</h1><p>A router is a device that is capable of sending and receiving data packets between computer networks, also creating an overlay network.<br>路由（router）是一個能在電腦網絡之間傳遞與接收資料封包的裝置，亦可創造覆蓋網路（overlay network）。</p>
<p>Based on internal routing tables, routers read each incoming packet and decide how to forward it.<br>根據內部的路由表格，讀取每個進入的封包並決定如何繼續傳遞。</p>
<p>Routers work at the network layer (layer 3) of the protocol<br>路由主要在 OSI 模型的應用層第三層或第四層運作。</p>
<h5 id="附加的特色-1"><a href="#附加的特色-1" class="headerlink" title="附加的特色"></a>附加的特色</h5><p>wireless networking, static routing, NAT, DHCP server, etc</p>
<h3 id="可選擇傳遞的路徑（ip）"><a href="#可選擇傳遞的路徑（ip）" class="headerlink" title="可選擇傳遞的路徑（ip）"></a>可選擇傳遞的路徑（ip）</h3><p>路由可以在網路（network）之間互相分享與傳遞資料封包，也可以選擇傳遞的路徑。</p>
<img src="/images/difference-between-gateway-and-router/1.png" class="" width="800" height="200" title="difference-between-gateway-and-router">

<h1 id="兩者如何共同工作"><a href="#兩者如何共同工作" class="headerlink" title="兩者如何共同工作"></a>兩者如何共同工作</h1><h3 id="閘道（gateway）關卡"><a href="#閘道（gateway）關卡" class="headerlink" title="閘道（gateway）關卡"></a>閘道（gateway）關卡</h3><p>Before arriving at the router, packets go to the gateway channel first, and the gateway checks the header information at once.<br>在資料抵達路由以前會間在閘道頻道上檢查資訊頭（the header information）。</p>
<p>After checking for any kind of error in the destination IP address and packet.<br>According to the needs of the destination network,it carries out data conversion and protocol conversion on the packet,<br>which is also the most critical step.<br>檢查完畢目的地的 IP 位址與數據包無任何異常後，閘道會攜出轉換協定（protocols）的封包，這中間經歷的步驟最為嚴謹。</p>
<h3 id="路由（router）關卡"><a href="#路由（router）關卡" class="headerlink" title="路由（router）關卡"></a>路由（router）關卡</h3><p>Finally, the processed packet is forwarded to the router to establish intelligent communication between the two different networks.<br>最後當封包傳遞到路由上後，會建立兩個不同網路（networks）的智能通訊。</p>
<p>The router extracts the destination address from the received packet, determines the network number in the address,<br>and then looks up the routing table to find the entry matching the destination network.<br>路由從封包中提取目的地的位址並且決定位址中的網絡號碼，查看路由表格對應的目的地網路進入點。</p>
<p>The routing table determines the next stop, destination, output interface, and other routing-related parameters that match the current packet.<br>路由表格會查看符合當前封包的路由相關參數，以決定好封包的下一站、目的地與傳輸出去的介面。</p>
<p>Finally, the packet is sent to the computer with the best route.<br>最後封包被傳遞到電腦中最適宜的路由道路上。</p>
<h1 id="閘道就是大門，路由就是樓層間的電梯"><a href="#閘道就是大門，路由就是樓層間的電梯" class="headerlink" title="閘道就是大門，路由就是樓層間的電梯"></a>閘道就是大門，路由就是樓層間的電梯</h1><p>In layman’s terms, gateways and routers are like the gates and elevators of a castle.<br>口語化來說，閘道就是大門，路由就是樓層間的電梯。</p>
<p>they must first pass the inspection and arrangement through the gate.<br>必須經過檢查與安排才能透過大門。</p>
<p>Then the elevator headquarters will choose the fastest elevator for them according to the characteristics and purpose of these strangers and finally,<br>arrive at the destination.<br>電梯總部人員根據性質與訴求選擇最適合最快的電梯協助抵達目的地。</p>
<h1 id="選擇閘道還是路由"><a href="#選擇閘道還是路由" class="headerlink" title="選擇閘道還是路由"></a>選擇閘道還是路由</h1><p>If your devices are on the same network, then routers and gateways can be peer to peer.<br>若你的多個裝置是同個網路，則路於與閘道可以進行對等式網路 peer to peer（P2P）</p>
<p>But if you want to connect two different networks with different protocols, the gateway can suit your demands.<br>若你想連接兩個不同協定的不同網絡，閘道可以符合需求。</p>
<p>Some routers and gateways in the market can already replace each other.<br>有些市面上的閘道與路由已經可以互相取代了。</p>
<p>The technology and capabilities of gateways and routers will continue to evolve and become more sophisticated over the next few years.<br>往後的幾年兩者的技術與可能性會互相演變得更細分精緻。</p>
</body></html> -->
        
        
        <html><head></head><body><p>閘道（gateway）與路由（router）在網絡早期的世界裡並無區別，且與 TCP/IP 通訊層有密不可分的關係。<br>在現今發達的網絡世界中逐漸分化了兩者的功能：</p>
<h1 id="閘道（gateway）"><a href="#閘道（gateway）" class="headerlink" title="閘道（gateway）"></a>閘道（gateway）</h1><p>A Gateway, on the other hand, joins dissimilar systems.<br>Gateway it is defined as a network entity that allows a network to interface with another network with different protocols.<br>閘道（gateway）能合併不同的系統，旨在允許不同協定（protocols）的網絡之間互相介接的網路裝置。</p>
            <!--  -->
            <p class="article-more-link">
                <a href="/2022/10/13/difference-between-gateway-and-router/">more</a>
            </p>
        
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2022/10/09/google-analytics-knowhow/" itemprop="url">關於 Google Analytics GA 你應該知道的事</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-10-09T06:20:19.000Z" itemprop="datePublished">10月 9 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            11 分鐘 讀完 (約 1680 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <!-- <html><head></head><body><p>Google Analytics 也就是 GA ，即將在 2023 年 7 月 1 日起不再提供<strong>通用版本（Universal Analytics）</strong><br>的資料分析了，全面升級至 GA4 是每個網站與應用程式必須面對的問題。</p>
<p>而訪客區分為新訪客與舊訪客，以及舊訪客的回訪率等資料。那麼 Google 要如何去區分呢？來了解一下：</p>
<h1 id="GA-如何區分與追蹤同一瀏覽人次"><a href="#GA-如何區分與追蹤同一瀏覽人次" class="headerlink" title="GA 如何區分與追蹤同一瀏覽人次"></a>GA 如何區分與追蹤同一瀏覽人次</h1><h3 id="client-ID"><a href="#client-ID" class="headerlink" title="client ID"></a>client ID</h3><p>該數據是 GA 用來判定此瀏覽器使用者是否為重複瀏覽的人次，紀錄方式透過 Cookie 裡的 _ga 查看內容的話，<br>會有一段追蹤碼記錄此用戶的 client ID，一旦清除 GA 偵測不到就會判定為新的瀏覽使用者。</p>
<img src="/images/google-analytics-knowhow/1.png" class="" width="800" height="200" title="google-analytics-knowhow">
<blockquote><p>由於 GA 判斷新訪客、舊訪客是使用「用戶裝置瀏覽器」來做區別，因此同一個用戶跨裝置訪問網站亦會被計入成兩個用戶，為了精準了解新訪客和舊訪客，事實上引入 User ID 作為統計方式會最為準確，而這一部份我待後續文章分享。</p>
<footer><strong>author</strong><cite><a target="_blank" rel="noopener" href="https://medium.com/peerone-technology-%E7%9A%AE%E5%81%B6%E7%8E%A9%E4%BA%92%E5%8B%95%E7%A7%91%E6%8A%80/%E4%B8%80%E7%AA%BA-ga-pageview-%E7%9A%84%E8%BF%BD%E8%B9%A4%E5%8A%9B%E9%87%8F-ga-%E7%B3%BB%E5%88%97-3-afbb42dbb8b5">一窺 GA PageView 的追蹤力量- GA 系列 (3)</a></cite></footer></blockquote>

<p>GA 參數（這裡指的是事件 event 參數）旨在追蹤與分析使用者在你的網站或 app 上所有的互動行為，<br>提供蒐集來的、具商業行為參考價值的數據。</p>
<blockquote><p>Parameters provide additional information about the ways users interact with your website. </p>
<footer><strong>google analytics</strong><cite><a target="_blank" rel="noopener" href="https://developers.google.com/analytics/devguides/collection/ga4/event-parameters?client_type=gtm">Set up event parameters</a></cite></footer></blockquote>
<p>以下初步揭開 GA 的基礎輪廓：</p>
<h1 id="使用者的著陸網頁（Landing-Page）"><a href="#使用者的著陸網頁（Landing-Page）" class="headerlink" title="使用者的著陸網頁（Landing Page）"></a>使用者的著陸網頁（Landing Page）</h1><p>訪客來到網站的第一個頁面，是整個工作階段（Session）的起始點並且開啟一個工作階段的流程，</p>
<h1 id="基本追蹤事件"><a href="#基本追蹤事件" class="headerlink" title="基本追蹤事件"></a>基本追蹤事件</h1><p>GA 有<strong>基本追蹤事件</strong>提供開通帳號的使用者，一窺網站或應用程式埋好 GA 追蹤碼之後的<strong>事件（event）</strong>概覽數據，<br>這篇先來簡單介紹 GA 常見的、自動蒐集的數據：</p>
<p><a target="_blank" rel="noopener" href="https://support.google.com/analytics/answer/9234069#user_engagement">官方說明文件</a></p>
<h3 id="網頁瀏覽（page-view）"><a href="#網頁瀏覽（page-view）" class="headerlink" title="網頁瀏覽（page_view）"></a>網頁瀏覽（page_view）</h3><p>在指定的時間區段內，所有使用者在網站或應用程式的網頁瀏覽（造訪）量；<br>其中使用者的分母根據 Client ID 計次，來得知網站有多少不重複使用者。</p>
<img src="/images/google-analytics-knowhow/2.png" class="" width="600" height="200" title="google-analytics-knowhow">


<h3 id="締結互動（user-engagement）"><a href="#締結互動（user-engagement）" class="headerlink" title="締結互動（user_engagement）"></a>締結互動（user_engagement）</h3><blockquote><p>The User engagement metric shows the time that your app screen was in the foreground or your web page was in focus. When your site or app is running but no page or screen is displayed, Analytics doesn’t collect the metric. The metric can help you understand when users actively use your website or app.</p>
<footer><strong>google link What is user engagement on Google Analytics?</strong></footer></blockquote>

<p>不負責任翻譯：<br>The User engagement 計量表示當你的應用程式或網站呈現在使用者畫面前景上並且被使用者聚焦，<br>與網站締結了互動行為，若應用程式或網站尚未載入完成或呈現出來，GA 不會蒐集該項指標。<br>這個計量可以幫助你了解目前應用程式或網站花了多少時間獲得使用者的聚焦，以及即時有多少活躍的使用者。</p>
<h5 id="互動活躍時間（engagement-time-msec）"><a href="#互動活躍時間（engagement-time-msec）" class="headerlink" title="互動活躍時間（engagement_time_msec）"></a>互動活躍時間（engagement_time_msec）</h5><p>計算使用者在與網站或應用程式締結互動之後開始計算，在網站上活躍的時間毫秒（msec）。</p>
<h3 id="campaign（活動分類）"><a href="#campaign（活動分類）" class="headerlink" title="campaign（活動分類）"></a>campaign（活動分類）</h3><p>可以在 GA 預設的 <strong>Click 事件</strong>裡查閱的參數，若是透過外部廣告（例如 Google Ads）等方式進入你的網站或應用程式，<br>campaign　參數就會被記錄，通常會顯示（referral）或（organic），有三大分類，<br>有時會帶括號有時不會（不知為啥知道的人請解惑一下XD）。</p>
<h5 id="organic"><a href="#organic" class="headerlink" title="(organic)"></a>(organic)</h5><p>透過搜尋而來的自然流量（主動）。</p>
<h5 id="referral"><a href="#referral" class="headerlink" title="(referral)"></a>(referral)</h5><p>透過外部媒體網站進來（被動）瀏覽的使用者，也就是行銷常講的外連（外部連結）。</p>
<h5 id="none"><a href="#none" class="headerlink" title="(none)"></a>(none)</h5><p>直接進入網站的使用者，例如在 url 輸入網址。</p>
<h3 id="medium（媒介分類）"><a href="#medium（媒介分類）" class="headerlink" title="medium（媒介分類）"></a>medium（媒介分類）</h3><p>使用者透過甚麼媒介方式進來你的網站，類別同上：</p>
<h3 id="source（媒介-origin）"><a href="#source（媒介-origin）" class="headerlink" title="source（媒介 origin）"></a>source（媒介 origin）</h3><p>透過外部廣告進來的 url，例如透過 Google 搜尋進來的就會顯示 <code>https://www.google.com/</code>；<br>透過外部網站進來的就會顯示外部網站的 Origin URL。</p>
<img src="/images/google-analytics-knowhow/5.png" class="" width="500" height="200" title="google-analytics-knowhow">

<h3 id="事件參數"><a href="#事件參數" class="headerlink" title="事件參數"></a>事件參數</h3><p>每個事件都有詳細參數可以閱覽，有機個是預設的（照順序），實際查看發現與官方文件的說明項目有出入。</p>
<h1 id="GA-如何計算一個互動的單位"><a href="#GA-如何計算一個互動的單位" class="headerlink" title="GA 如何計算一個互動的單位"></a>GA 如何計算一個互動的單位</h1><h3 id="工作階段（Session-Start）"><a href="#工作階段（Session-Start）" class="headerlink" title="工作階段（Session Start）"></a>工作階段（Session Start）</h3><p>GA 的工作階段以 30 分鐘為一個單位，若這段期間使用者並未對網站進行任何互動（例如起來去廁所），<br>當前的工作階段就會結束。每個單位的工作流程可以包含多個互動事件（Event）或是從事商業行為，例如社交互動（Social Interaction）、電子商戶交易行為（Transaction），直到一個單位的工作階段結束（離開網站或是閒置超過 30 分鐘）。</p>
<h5 id="工作階段強制切割"><a href="#工作階段強制切割" class="headerlink" title="工作階段強制切割"></a>工作階段強制切割</h5><ul>
<li>只要時間來到<strong>隔日凌晨 00:00:00 時分</strong>，無論當前的工作階段是否有持續進行互動，都會被強制切割成另一個新的工作階段。</li>
<li>當使用者更換了網站的來源媒介（medium 例如從廣告點進來、重新搜尋網站進入），都會被強制切割成另一個新的工作階段，無論使用者是否有停止當前的工作階段。</li>
</ul>
<h3 id="到達頁面（UA-通用版稱呼）"><a href="#到達頁面（UA-通用版稱呼）" class="headerlink" title="到達頁面（UA 通用版稱呼）"></a>到達頁面（UA 通用版稱呼）</h3><p>每一個工作階段開始的第一個頁面。</p>
<h3 id="離開率"><a href="#離開率" class="headerlink" title="離開率"></a>離開率</h3><p>一個工作階段中「最後一個」瀏覽的網頁，在所有網頁瀏覽量的占比。</p>
<p>參考資料：<br><a target="_blank" rel="noopener" href="https://awoo.ai/zh-hant/blog/google-analytics-session/">正確理解Google Analytics「工作階段」定義、計算、重要性</a></p>
</body></html> -->
        
        
        <html><head></head><body><p>Google Analytics 也就是 GA ，即將在 2023 年 7 月 1 日起不再提供<strong>通用版本（Universal Analytics）</strong><br>的資料分析了，全面升級至 GA4 是每個網站與應用程式必須面對的問題。</p>
<p>而訪客區分為新訪客與舊訪客，以及舊訪客的回訪率等資料。那麼 Google 要如何去區分呢？來了解一下：</p>
            <!--  -->
            <p class="article-more-link">
                <a href="/2022/10/09/google-analytics-knowhow/">more</a>
            </p>
        
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous is-invisible is-hidden-mobile">
        <a href="/page/0/">
            
            <i class="fas fa-caret-left"></i>
            prev
        </a>
    </div>
    <div class="pagination-next">

        <a href="/page/2/">
            next
            <i class="fas fa-caret-right"></i>
        </a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link is-current" href="/">1</a></li>
        
        <li><a class="pagination-link" href="/page/2/">2</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/21/">21</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2022 Mawchu 謝佳芳&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" target="_blank" rel="noopener" href="https://github.com/mawchu">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>繁體中文</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu">
            <div class="dropdown-content">
            
                <a href="/index.html" class="dropdown-item">
                    繁體中文
                </a>
            
                <a href="/en/index.html" class="dropdown-item">
                    English
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-TW");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
          position: relative;
        }

        .hljs .clipboard-btn {
          float: right;
          color: #9a9a9a;
          background: none;
          border: none;
          cursor: pointer;
          font-family: 'Noto Sans TC', sans-serif;
          
          transition: ease-in-out .3s;
          transform: scale(.9);
        }

        .hljs .clipboard-btn:hover {
          color: #2e2e2e;
          transform: scale(1.1);
        }

        .hljs > .clipboard-btn {
          display: none;
          position: absolute;
          right: 4px;
          top: 4px;
        }

        .hljs:hover > .clipboard-btn {
          display: inline;
        }

        button {
          padding: 0;
        }

        figure.highlight .gutter {
          background-color: #d6e1e4;
        }

        .gutter span {
          color: white;
        }

    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button><i class="fas fa-copy"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站內搜尋" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '頁面',
                CATEGORIES: '分類',
                TAGS: '標籤',
                UNTITLED: '(無標題)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>