<?xml version="1.0"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>http://maomaoxie.github.io</id>
    <title>Mawchu 貓奴前端的天空 • Posts by &#34;node&#34; tag</title>
    <link href="http://maomaoxie.github.io" />
    <updated>2022-02-21T06:48:33.000Z</updated>
    <category term="javascript" />
    <category term="constructor" />
    <category term="instance" />
    <category term="methods" />
    <category term="backEnd" />
    <category term="node" />
    <category term="express" />
    <category term="router" />
    <category term="api" />
    <category term="graphQL" />
    <category term="facebook" />
    <category term="git" />
    <category term="github" />
    <category term="sourceTree" />
    <category term="http" />
    <category term="https" />
    <category term="request" />
    <category term="response" />
    <category term="httpHeader" />
    <category term="httpMethods" />
    <category term="status" />
    <category term="Javascript" />
    <category term="type" />
    <category term="laravel" />
    <category term="php" />
    <category term="linux" />
    <category term="blade" />
    <category term="wsl2" />
    <category term="layout" />
    <category term="migration" />
    <category term="sql" />
    <category term="public" />
    <category term="static" />
    <category term="tailwind" />
    <category term="env" />
    <category term="process" />
    <category term="dotenv" />
    <category term="css" />
    <category term="less" />
    <category term="processors" />
    <category term="shortCircuit" />
    <category term="optionalChaining" />
    <category term="tricks" />
    <category term="webService" />
    <category term="restfulApi" />
    <category term="vue3" />
    <category term="vite" />
    <category term="typescript" />
    <category term="WebSocket" />
    <category term="WebHook" />
    <category term="vue" />
    <category term="compositionAPI" />
    <entry>
        <id>http://maomaoxie.github.io/2022/02/21/zh-tw/node-process-env/</id>
        <title>Node如何設置.env環境檔</title>
        <link rel="alternate" href="http://maomaoxie.github.io/2022/02/21/zh-tw/node-process-env/"/>
        <content type="html">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;img src=&#34;/images/node-process-env/1.png&#34; class=&#34;&#34; width=&#34;800&#34; height=&#34;200&#34; title=&#34;node-process-env&#34;&gt;
&lt;p&gt;圖片來源:&lt;a href=&#34;https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c&#34;&gt;https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;開發專案的時候機密文件如何保存很重要，可以保護不被有心人士竊取，像是 API 金鑰、client-ID 與 client-secret 等可以呼叫遠端資料的通關密碼都需要妥善保存不暴露到網站上。&lt;br&gt;這邊來說明一下怎麼設置專案裡的環境檔案，並且讀取機密資料：&lt;/p&gt;
&lt;h1 id=&#34;創建-env-檔案&#34;&gt;&lt;a href=&#34;#創建-env-檔案&#34; class=&#34;headerlink&#34; title=&#34;創建 .env 檔案&#34;&gt;&lt;/a&gt;創建 .env 檔案&lt;/h1&gt;&lt;p&gt;首先在跟目錄新增一個 .env 檔案，甚至可以設置以下幾種檔案來撰寫想要的環境模式腳本：&lt;/p&gt;
&lt;h3 id=&#34;根據環境模式建立&#34;&gt;&lt;a href=&#34;#根據環境模式建立&#34; class=&#34;headerlink&#34; title=&#34;根據環境模式建立&#34;&gt;&lt;/a&gt;根據環境模式建立&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;全局環境檔：.env&lt;/li&gt;
&lt;li&gt;開發環境檔：.env.dev&lt;/li&gt;
&lt;li&gt;測試環境檔：.env.sit&lt;/li&gt;
&lt;li&gt;生產環境檔：.env.prod&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;環境檔變數&#34;&gt;&lt;a href=&#34;#環境檔變數&#34; class=&#34;headerlink&#34; title=&#34;環境檔變數&#34;&gt;&lt;/a&gt;環境檔變數&lt;/h3&gt;&lt;p&gt;內容很簡單，都是鍵值對（key-value）的方式撰寫變數：&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext hljs&#34;&gt;&lt;figcaption&gt;&lt;span&gt;.env&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;YOUR_VARAIBLE_NAME=VALUE&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h1 id=&#34;Node-js-process&#34;&gt;&lt;a href=&#34;#Node-js-process&#34; class=&#34;headerlink&#34; title=&#34;Node.js process&#34;&gt;&lt;/a&gt;Node.js process&lt;/h1&gt;&lt;p&gt;Node 提供了一個全局可使用的模組 process 記錄了所有關於目前 Node.js 程式的資訊，不需要 require()　就可以使用，棒棒的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The process object is a global that provides information about, and control over, the current Node.js process. As a global, it is always available to Node.js applications without using require().&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;process-env&#34;&gt;&lt;a href=&#34;#process-env&#34; class=&#34;headerlink&#34; title=&#34;process.env&#34;&gt;&lt;/a&gt;process.env&lt;/h3&gt;&lt;p&gt;process.env 則提供了關於使用者的環境物件，而腳本檔案需要的資訊都可以放在這個物件中。&lt;br&gt;該物件中的資料會自動轉換成字串（string）。&lt;br&gt;在 windows 作業系統中環境變數的大小寫是不敏感的。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The process.env property returns an object containing the user environment.&lt;br&gt;See environ(7). Assigning a property on process.env will implicitly convert the value to a string.&lt;br&gt;On Windows operating systems, environment variables are case-insensitive.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h1 id=&#34;npm-dotenv&#34;&gt;&lt;a href=&#34;#npm-dotenv&#34; class=&#34;headerlink&#34; title=&#34;npm dotenv&#34;&gt;&lt;/a&gt;npm dotenv&lt;/h1&gt;&lt;p&gt;光有全局的 process.env 是不夠的，還需要使用一個神人創造的 &lt;strong&gt;npm 套件 &lt;a href=&#34;https://www.npmjs.com/package/dotenv&#34;&gt;dotenv&lt;/a&gt;&lt;/strong&gt; 才能無痛讀取自己創建的 .env 資料唷！&lt;/p&gt;
&lt;figure class=&#34;highlight plaintext hljs&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;npm i dotenv --save&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;在專案引用該套件：&lt;/p&gt;
&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;dotenv&#39;&lt;/span&gt;).&lt;span class=&#34;title function_&#34;&gt;config&lt;/span&gt;()&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; db = &lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;db&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;db.&lt;span class=&#34;title function_&#34;&gt;connect&lt;/span&gt;({&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;hljs-attr&#34;&gt;host&lt;/span&gt;: process.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;DB_HOST&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;hljs-attr&#34;&gt;username&lt;/span&gt;: process.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;DB_USER&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;hljs-attr&#34;&gt;password&lt;/span&gt;: process.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;DB_PASS&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-attr&#34;&gt;https&lt;/span&gt;:&lt;span class=&#34;hljs-comment&#34;&gt;//dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h1 id=&#34;善用-gitignore&#34;&gt;&lt;a href=&#34;#善用-gitignore&#34; class=&#34;headerlink&#34; title=&#34;善用 .gitignore&#34;&gt;&lt;/a&gt;善用 .gitignore&lt;/h1&gt;&lt;p&gt;通常搭配 git 使用時會放置在 env 檔中並且 .gitignore 避免 commit 到公開環境中。&lt;br&gt;使用方式很簡單，在跟目錄創建一個 .gitignore 檔案之後，撰寫需要被 git 略過不被 commit 以及 push 的檔案類型：&lt;/p&gt;
&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;figcaption&gt;&lt;span&gt;.gitignore&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;dev&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;sit&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;.&lt;span class=&#34;hljs-property&#34;&gt;env&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;prod&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;p&gt;參考資料：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;a href=&#34;https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c&#34;&gt;https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;https://dwatow.github.io/2019/01-26-node-with-env-first/&#34;&gt;https://dwatow.github.io/2019/01-26-node-with-env-first/&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_env&#34;&gt;https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_env&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/body&gt;&lt;/html&gt;</content>
        <category term="node" />
        <category term="git" />
        <category term="env" />
        <category term="process" />
        <category term="dotenv" />
        <updated>2022-02-21T06:48:33.000Z</updated>
    </entry>
    <entry>
        <id>http://maomaoxie.github.io/2022/02/20/zh-tw/express-router-module/</id>
        <title>Express 路由模組化</title>
        <link rel="alternate" href="http://maomaoxie.github.io/2022/02/20/zh-tw/express-router-module/"/>
        <content type="html">&lt;html&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;img src=&#34;/images/express-router-module/1.png&#34; class=&#34;&#34; width=&#34;800&#34; height=&#34;200&#34; title=&#34;express-router-module&#34;&gt;
&lt;h6 id=&#34;圖片來源-https-inmywordz-com-archives-504&#34;&gt;&lt;a href=&#34;#圖片來源-https-inmywordz-com-archives-504&#34; class=&#34;headerlink&#34; title=&#34;圖片來源: https://inmywordz.com/archives/504&#34;&gt;&lt;/a&gt;圖片來源: &lt;a href=&#34;https://inmywordz.com/archives/504&#34;&gt;https://inmywordz.com/archives/504&lt;/a&gt;&lt;/h6&gt;&lt;p&gt;當路由越寫越多變成霍爾的移動城堡一樣雜亂肥大時，自己都看得眼花撩亂啦～考慮使用模組化的概念來統整自己的後端路由是很好的選擇，那麼就來開始吧！&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;Express-js-4-0-Router-的誕生&#34;&gt;&lt;a href=&#34;#Express-js-4-0-Router-的誕生&#34; class=&#34;headerlink&#34; title=&#34;Express.js 4.0 Router 的誕生&#34;&gt;&lt;/a&gt;Express.js 4.0 Router 的誕生&lt;/h1&gt;&lt;p&gt;Express 輕量框架提供很多整理路由的方式，Express.js 4.0 導入了新的 &lt;strong&gt;Router 功能&lt;/strong&gt;，可以更彈性的撰寫子路由規則以及中介軟體啦！&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;Express.js 4.0 有加入一個新的 Router 功能，它就像一個迷你的應用程式，可以讓應用程式內部的路由撰寫更方便、更有彈性。&lt;br&gt;Express.js 在 4.0 版中有許多新的功能，其中一項主要的功能就是 Router，以下我們介紹如何使用 Router 功能來撰寫應用程式。&lt;br&gt;&lt;a href=&#34;https://blog.gtwang.org/programming/learn-to-use-the-new-router-in-expressjs-4/&#34;&gt;https://blog.gtwang.org/programming/learn-to-use-the-new-router-in-expressjs-4/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1 id=&#34;app-use-產生父路由與路由頭中介&#34;&gt;&lt;a href=&#34;#app-use-產生父路由與路由頭中介&#34; class=&#34;headerlink&#34; title=&#34;app.use() 產生父路由與路由頭中介&#34;&gt;&lt;/a&gt;app.use() 產生父路由與路由頭中介&lt;/h1&gt;&lt;blockquote&gt;&lt;p&gt;app.use(); mounts middleware for all routes of the app (or those matching the routes specified if you use app.use(‘/ANYROUTESHERE’, yourMiddleware());).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;app.use() 是啟用一個&lt;strong&gt;路由頭（父路由）&lt;/strong&gt;，並且只要符合該路由頭的&lt;strong&gt;每一個子路由&lt;/strong&gt;，該中介軟體都會啟用，很適合用在登入後驗證是否有登入的會員，是否有訪問路由頁面的權限，以撰寫一些驗證信息。&lt;/p&gt;
&lt;hr&gt;
&lt;h1 id=&#34;router-methods-產生子路由&#34;&gt;&lt;a href=&#34;#router-methods-產生子路由&#34; class=&#34;headerlink&#34; title=&#34;router.methods() 產生子路由&#34;&gt;&lt;/a&gt;router.methods() 產生子路由&lt;/h1&gt;&lt;h4 id=&#34;舊的子路由寫法&#34;&gt;&lt;a href=&#34;#舊的子路由寫法&#34; class=&#34;headerlink&#34; title=&#34;舊的子路由寫法&#34;&gt;&lt;/a&gt;舊的子路由寫法&lt;/h4&gt;&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; express = &lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;express&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; app = &lt;span class=&#34;title function_&#34;&gt;express&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; router = express.&lt;span class=&#34;title class_&#34;&gt;Router&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; port = &lt;span class=&#34;hljs-number&#34;&gt;5500&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;舊的寫法：歡迎來到首頁&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;listen&lt;/span&gt;(port, &lt;span class=&#34;hljs-function&#34;&gt;() =&amp;gt;&lt;/span&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;variable language_&#34;&gt;console&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;log&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;`Example app listening on port &lt;span class=&#34;hljs-subst&#34;&gt;${port}&lt;/span&gt;`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img src=&#34;/images/express-router-module/2.png&#34; class=&#34;&#34; width=&#34;380&#34; height=&#34;200&#34; title=&#34;express-router-module&#34;&gt;

&lt;h4 id=&#34;新的子路由寫法&#34;&gt;&lt;a href=&#34;#新的子路由寫法&#34; class=&#34;headerlink&#34; title=&#34;新的子路由寫法&#34;&gt;&lt;/a&gt;新的子路由寫法&lt;/h4&gt;&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; express = &lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;express&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; app = &lt;span class=&#34;title function_&#34;&gt;express&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; router = express.&lt;span class=&#34;title class_&#34;&gt;Router&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; port = &lt;span class=&#34;hljs-number&#34;&gt;5500&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;新的寫法：歡迎來到首頁&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/page&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;新的寫法：歡迎來到分頁&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;// 制定一個路由頭（父路由）&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;use&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/api&#39;&lt;/span&gt;, router)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;listen&lt;/span&gt;(port, &lt;span class=&#34;hljs-function&#34;&gt;() =&amp;gt;&lt;/span&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;variable language_&#34;&gt;console&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;log&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;`Example app listening on port &lt;span class=&#34;hljs-subst&#34;&gt;${port}&lt;/span&gt;`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img src=&#34;/images/express-router-module/3.png&#34; class=&#34;&#34; width=&#34;380&#34; height=&#34;200&#34; title=&#34;express-router-module&#34;&gt;
&lt;img src=&#34;/images/express-router-module/4.png&#34; class=&#34;&#34; width=&#34;478&#34; height=&#34;235&#34; title=&#34;express-router-module&#34;&gt;

&lt;p&gt;我自己是看不太出來差別，不過文章都是寫道 router 就像一個小型 app 提供你整理路由系統更好的方法，而具體的差異如下：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;“A Router doesn’t .listen() for requests on its own”. That might be the main difference.&lt;br&gt;It’s useful for separating your application into multiple modules – creating a Router in each that the app can require() and .use() as middleware. &lt;/p&gt;
&lt;/blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Router 不能單個路由做 port 監聽 &lt;/li&gt;
&lt;li&gt;Router 可以使用 require() 與 use() 模組化管理子路由&lt;br&gt;  哪一種比較好眾說紛紜，基本上能適合專案模式的都是好方法。&lt;/li&gt;
&lt;/ol&gt;
&lt;blockquote&gt;&lt;p&gt;router.use(); mounts middleware for the routes served by the specific router&lt;br&gt;router.get is only for &lt;strong&gt;defining subpaths&lt;/strong&gt;.&lt;br&gt;Consider this example:&lt;/p&gt;
&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;var&lt;/span&gt; router = express.&lt;span class=&#34;title class_&#34;&gt;Router&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;use&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/first&#39;&lt;/span&gt;, router); &lt;span class=&#34;hljs-comment&#34;&gt;// Mount the router as middleware at path /first&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/sud&#39;&lt;/span&gt;, smaller);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/user&#39;&lt;/span&gt;, bigger);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
If you open /first/sud, then the smaller function will get called.
If you open /first/user, then the bigger function will get called.
In short, app.use(&#39;/first&#39;, router) mounts the middleware at path /first, then router.get sets the subpath accordingly.
https://stackoverflow.com/questions/27227650/difference-between-app-use-and-router-use-in-express&lt;/blockquote&gt;
&lt;hr&gt;
&lt;h1 id=&#34;router-use-子路由中介&#34;&gt;&lt;a href=&#34;#router-use-子路由中介&#34; class=&#34;headerlink&#34; title=&#34;router.use() 子路由中介&#34;&gt;&lt;/a&gt;router.use() 子路由中介&lt;/h1&gt;&lt;p&gt;router.use() 是產生子路由中介（middleware）的方式：&lt;/p&gt;
&lt;blockquote class=&#34;colorquote info&#34;&gt;&lt;p&gt;在使用 middleware 時必須要注意他的放置位置必須要在 routes 之前，程式在執行的時候會依據 middleware 與 routes 的先後順序來執行，如果不小心將 middleware 放在 routes 之後，那麼在 routes 處理完請求之後就會結束處理的流程，這樣 middleware 就根本不會執行。&lt;br&gt;&lt;a href=&#34;https://blog.gtwang.org/programming/learn-to-use-the-new-router-in-expressjs-4/&#34;&gt;https://blog.gtwang.org/programming/learn-to-use-the-new-router-in-expressjs-4/&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;// 中介軟體要寫在 router 上面&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;use&lt;/span&gt;(&lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res, next&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;hljs-comment&#34;&gt;// 輸出記錄訊息至終端機&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; url = &lt;span class=&#34;hljs-string&#34;&gt;`&lt;span class=&#34;hljs-subst&#34;&gt;${req.protocol}&lt;/span&gt;://&lt;span class=&#34;hljs-subst&#34;&gt;${req.hostname}&lt;/span&gt;:&lt;span class=&#34;hljs-subst&#34;&gt;${port}&lt;/span&gt;&lt;span class=&#34;hljs-subst&#34;&gt;${req.baseUrl}&lt;/span&gt;&lt;span class=&#34;hljs-subst&#34;&gt;${req.path}&lt;/span&gt;`&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;variable language_&#34;&gt;console&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;log&lt;/span&gt;(url, &lt;span class=&#34;hljs-string&#34;&gt;&#39;子路由會經過我&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;hljs-comment&#34;&gt;// 繼續路由處理&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;title function_&#34;&gt;next&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;新的寫法：歡迎來到首頁&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/page&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;新的寫法：歡迎來到分頁&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img src=&#34;/images/express-router-module/5.png&#34; class=&#34;&#34; width=&#34;478&#34; height=&#34;235&#34; title=&#34;express-router-module&#34;&gt;
&lt;hr&gt;
&lt;h1 id=&#34;router-模組化&#34;&gt;&lt;a href=&#34;#router-模組化&#34; class=&#34;headerlink&#34; title=&#34;router 模組化&#34;&gt;&lt;/a&gt;router 模組化&lt;/h1&gt;&lt;h4 id=&#34;子路由模塊&#34;&gt;&lt;a href=&#34;#子路由模塊&#34; class=&#34;headerlink&#34; title=&#34;子路由模塊&#34;&gt;&lt;/a&gt;子路由模塊&lt;/h4&gt;&lt;p&gt;將幾個子路徑依功能切開可以更方便的統整路由：&lt;/p&gt;
&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;figcaption&gt;&lt;span&gt;./routers/cat.js&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; express = &lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;express&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; router = express.&lt;span class=&#34;title class_&#34;&gt;Router&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; port = &lt;span class=&#34;hljs-number&#34;&gt;5500&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;use&lt;/span&gt;(&lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res, next&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;// 輸出記錄訊息至終端機&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; url = &lt;span class=&#34;hljs-string&#34;&gt;`&lt;span class=&#34;hljs-subst&#34;&gt;${req.protocol}&lt;/span&gt;://&lt;span class=&#34;hljs-subst&#34;&gt;${req.hostname}&lt;/span&gt;:&lt;span class=&#34;hljs-subst&#34;&gt;${port}&lt;/span&gt;&lt;span class=&#34;hljs-subst&#34;&gt;${req.baseUrl}&lt;/span&gt;&lt;span class=&#34;hljs-subst&#34;&gt;${req.path}&lt;/span&gt;`&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;variable language_&#34;&gt;console&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;log&lt;/span&gt;(url, &lt;span class=&#34;hljs-string&#34;&gt;&#39;喵喵子路由會經過我&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;hljs-comment&#34;&gt;// 繼續路由處理&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;title function_&#34;&gt;next&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    &lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; url = &lt;span class=&#34;hljs-string&#34;&gt;`&lt;span class=&#34;hljs-subst&#34;&gt;${req.protocol}&lt;/span&gt;://&lt;span class=&#34;hljs-subst&#34;&gt;${req.hostname}&lt;/span&gt;:&lt;span class=&#34;hljs-subst&#34;&gt;${port}&lt;/span&gt;&lt;span class=&#34;hljs-subst&#34;&gt;${req.baseUrl}&lt;/span&gt;&lt;span class=&#34;hljs-subst&#34;&gt;${req.path}&lt;/span&gt;`&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;來到喵喵子路由&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;});&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;router.&lt;span class=&#34;title function_&#34;&gt;get&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/meow&#39;&lt;/span&gt;, &lt;span class=&#34;hljs-keyword&#34;&gt;function&lt;/span&gt;(&lt;span class=&#34;hljs-params&#34;&gt;req, res&lt;/span&gt;) {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;    res.&lt;span class=&#34;title function_&#34;&gt;send&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;喵喵分頁&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;});&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;variable language_&#34;&gt;module&lt;/span&gt;.&lt;span class=&#34;hljs-property&#34;&gt;exports&lt;/span&gt; = router;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;

&lt;h4 id=&#34;引用模塊&#34;&gt;&lt;a href=&#34;#引用模塊&#34; class=&#34;headerlink&#34; title=&#34;引用模塊&#34;&gt;&lt;/a&gt;引用模塊&lt;/h4&gt;&lt;p&gt;在入口引入模塊：&lt;/p&gt;
&lt;figure class=&#34;highlight javascript hljs&#34;&gt;&lt;figcaption&gt;&lt;span&gt;index.js&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tbody&gt;&lt;tr&gt;&lt;td class=&#34;gutter&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&#34;code&#34;&gt;&lt;pre&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; express = &lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;express&#39;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; app = &lt;span class=&#34;title function_&#34;&gt;express&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; router = express.&lt;span class=&#34;title class_&#34;&gt;Router&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; catsRouter = &lt;span class=&#34;hljs-built_in&#34;&gt;require&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;./routes/cat&#39;&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-keyword&#34;&gt;const&lt;/span&gt; port = &lt;span class=&#34;hljs-number&#34;&gt;5500&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;span class=&#34;hljs-comment&#34;&gt;// 模組寫法&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;use&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;&#39;/cat&#39;&lt;/span&gt;, catsRouter) &lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;app.&lt;span class=&#34;title function_&#34;&gt;listen&lt;/span&gt;(port, &lt;span class=&#34;hljs-function&#34;&gt;() =&amp;gt;&lt;/span&gt; {&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;  &lt;span class=&#34;variable language_&#34;&gt;console&lt;/span&gt;.&lt;span class=&#34;title function_&#34;&gt;log&lt;/span&gt;(&lt;span class=&#34;hljs-string&#34;&gt;`Example app listening on port &lt;span class=&#34;hljs-subst&#34;&gt;${port}&lt;/span&gt;`&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&#34;line&#34;&gt;})&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;img src=&#34;/images/express-router-module/6.png&#34; class=&#34;&#34; width=&#34;478&#34; height=&#34;235&#34; title=&#34;express-router-module&#34;&gt;
&lt;img src=&#34;/images/express-router-module/7.png&#34; class=&#34;&#34; width=&#34;478&#34; height=&#34;235&#34; title=&#34;express-router-module&#34;&gt;
&lt;img src=&#34;/images/express-router-module/8.png&#34; class=&#34;&#34; width=&#34;478&#34; height=&#34;235&#34; title=&#34;express-router-module&#34;&gt;
&lt;hr&gt;
&lt;p&gt;參考文章：&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;&lt;a href=&#34;https://stackoverflow.com/questions/27227650/difference-between-app-use-and-router-use-in-express&#34;&gt;https://stackoverflow.com/questions/27227650/difference-between-app-use-and-router-use-in-express&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;https://blog.gtwang.org/programming/learn-to-use-the-new-router-in-expressjs-4/&#34;&gt;https://blog.gtwang.org/programming/learn-to-use-the-new-router-in-expressjs-4/&lt;/a&gt;&lt;br&gt;&lt;a href=&#34;http://expressjs.com/zh-tw/api.html#req&#34;&gt;http://expressjs.com/zh-tw/api.html#req&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;&lt;/body&gt;&lt;/html&gt;</content>
        <category term="backEnd" />
        <category term="node" />
        <category term="express" />
        <category term="router" />
        <updated>2022-02-20T06:12:53.000Z</updated>
    </entry>
</feed>