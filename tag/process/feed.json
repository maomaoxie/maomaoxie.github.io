{
    "version": "https://jsonfeed.org/version/1",
    "title": "Mawchu 貓奴前端的天空 • All posts by \"process\" tag",
    "description": "Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習",
    "home_page_url": "http://maomaoxie.github.io",
    "items": [
        {
            "id": "http://maomaoxie.github.io/2022/02/21/zh-tw/node-process-env/",
            "url": "http://maomaoxie.github.io/2022/02/21/zh-tw/node-process-env/",
            "title": "Node如何設置.env環境檔",
            "date_published": "2022-02-21T14:48:33.000Z",
            "content_html": "<html><head></head><body><img src=\"/images/node-process-env/1.png\" class=\"\" width=\"800\" height=\"200\" title=\"node-process-env\">\n<p>圖片來源:<a href=\"https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c\">https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c</a></p>\n<p>開發專案的時候機密文件如何保存很重要，可以保護不被有心人士竊取，像是 API 金鑰、client-ID 與 client-secret 等可以呼叫遠端資料的通關密碼都需要妥善保存不暴露到網站上。<br>這邊來說明一下怎麼設置專案裡的環境檔案，並且讀取機密資料：</p>\n<h1 id=\"創建-env-檔案\"><a href=\"#創建-env-檔案\" class=\"headerlink\" title=\"創建 .env 檔案\"></a>創建 .env 檔案</h1><p>首先在跟目錄新增一個 .env 檔案，甚至可以設置以下幾種檔案來撰寫想要的環境模式腳本：</p>\n<h3 id=\"根據環境模式建立\"><a href=\"#根據環境模式建立\" class=\"headerlink\" title=\"根據環境模式建立\"></a>根據環境模式建立</h3><ul>\n<li>全局環境檔：.env</li>\n<li>開發環境檔：.env.dev</li>\n<li>測試環境檔：.env.sit</li>\n<li>生產環境檔：.env.prod</li>\n</ul>\n<h3 id=\"環境檔變數\"><a href=\"#環境檔變數\" class=\"headerlink\" title=\"環境檔變數\"></a>環境檔變數</h3><p>內容很簡單，都是鍵值對（key-value）的方式撰寫變數：</p>\n<figure class=\"highlight plaintext hljs\"><figcaption><span>.env</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">YOUR_VARAIBLE_NAME=VALUE</span><br></pre></td></tr></tbody></table></figure>\n\n<h1 id=\"Node-js-process\"><a href=\"#Node-js-process\" class=\"headerlink\" title=\"Node.js process\"></a>Node.js process</h1><p>Node 提供了一個全局可使用的模組 process 記錄了所有關於目前 Node.js 程式的資訊，不需要 require()　就可以使用，棒棒的。</p>\n<blockquote>\n<p>The process object is a global that provides information about, and control over, the current Node.js process. As a global, it is always available to Node.js applications without using require().</p>\n</blockquote>\n<h3 id=\"process-env\"><a href=\"#process-env\" class=\"headerlink\" title=\"process.env\"></a>process.env</h3><p>process.env 則提供了關於使用者的環境物件，而腳本檔案需要的資訊都可以放在這個物件中。<br>該物件中的資料會自動轉換成字串（string）。<br>在 windows 作業系統中環境變數的大小寫是不敏感的。</p>\n<blockquote>\n<p>The process.env property returns an object containing the user environment.<br>See environ(7). Assigning a property on process.env will implicitly convert the value to a string.<br>On Windows operating systems, environment variables are case-insensitive.</p>\n</blockquote>\n<h1 id=\"npm-dotenv\"><a href=\"#npm-dotenv\" class=\"headerlink\" title=\"npm dotenv\"></a>npm dotenv</h1><p>光有全局的 process.env 是不夠的，還需要使用一個神人創造的 <strong>npm 套件 <a href=\"https://www.npmjs.com/package/dotenv\">dotenv</a></strong> 才能無痛讀取自己創建的 .env 資料唷！</p>\n<figure class=\"highlight plaintext hljs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i dotenv --save</span><br></pre></td></tr></tbody></table></figure>\n<p>在專案引用該套件：</p>\n<figure class=\"highlight javascript hljs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'dotenv'</span>).<span class=\"title function_\">config</span>()</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> db = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">'db'</span>)</span><br><span class=\"line\">db.<span class=\"title function_\">connect</span>({</span><br><span class=\"line\">  <span class=\"hljs-attr\">host</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_HOST</span>,</span><br><span class=\"line\">  <span class=\"hljs-attr\">username</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_USER</span>,</span><br><span class=\"line\">  <span class=\"hljs-attr\">password</span>: process.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">DB_PASS</span></span><br><span class=\"line\">})</span><br><span class=\"line\"><span class=\"hljs-attr\">https</span>:<span class=\"hljs-comment\">//dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c</span></span><br></pre></td></tr></tbody></table></figure>\n\n<h1 id=\"善用-gitignore\"><a href=\"#善用-gitignore\" class=\"headerlink\" title=\"善用 .gitignore\"></a>善用 .gitignore</h1><p>通常搭配 git 使用時會放置在 env 檔中並且 .gitignore 避免 commit 到公開環境中。<br>使用方式很簡單，在跟目錄創建一個 .gitignore 檔案之後，撰寫需要被 git 略過不被 commit 以及 push 的檔案類型：</p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>.gitignore</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">.<span class=\"hljs-property\">env</span></span><br><span class=\"line\">.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">dev</span></span><br><span class=\"line\">.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">sit</span></span><br><span class=\"line\">.<span class=\"hljs-property\">env</span>.<span class=\"hljs-property\">prod</span></span><br></pre></td></tr></tbody></table></figure>\n\n<p>參考資料：</p>\n<blockquote>\n<p><a href=\"https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c\">https://dev.to/aadilraza339/what-is-env-file-in-node-js-3h6c</a><br><a href=\"https://dwatow.github.io/2019/01-26-node-with-env-first/\">https://dwatow.github.io/2019/01-26-node-with-env-first/</a><br><a href=\"https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_env\">https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_env</a></p>\n</blockquote>\n</body></html>",
            "tags": [
                "node",
                "git",
                "env",
                "process",
                "dotenv"
            ]
        }
    ]
}