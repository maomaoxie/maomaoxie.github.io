{
    "version": "https://jsonfeed.org/version/1",
    "title": "Mawchu 貓奴前端的天空 • All posts by \"typescript\" tag",
    "description": "Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習",
    "home_page_url": "http://maomaoxie.github.io",
    "items": [
        {
            "id": "http://maomaoxie.github.io/2022/02/18/zh-tw/vue3-vite-ts/",
            "url": "http://maomaoxie.github.io/2022/02/18/zh-tw/vue3-vite-ts/",
            "title": "Vue3 + Vite + Ts 專案建置",
            "date_published": "2022-02-18T20:16:27.000Z",
            "content_html": "<html><head></head><body><p>Vite 問世以後總算不用再看著打包的百分比甚麼時候跑完了（灑花，按下 ctrl S 直接查看效果棒棒的！<br>不過再也沒有藉口可以喝口拿鐵啦XD</p>\n<p>簡單介紹一下 Vite 是甚麼：</p>\n<blockquote><p> Vite（法语意为 “快速的”，发音 /vit/，发音同 “veet”）是一种<strong>新型前端构建工具</strong>，能够显著提升前端开发体验。它主要由两部分组成：</p>\n<ul>\n<li>一个开发服务器，它基于 原生 ES 模块 提供了 丰富的内建功能，如速度快到惊人的<strong>模块热更新（HMR）</strong>。</li>\n<li>一套构建指令，它使用 Rollup 打包你的代码，并且它是预配置的，可输出用于生产环境的高度优化过的静态资源。</li>\n</ul>\n</blockquote>\n<p>先打預防針，小菜雞本人對於類別的物件導向了解尚淺，ts 的運用也不熟悉，導入使用再一步一步學習，這裡著重於專案是否能啟用。<br>本篇簡略說明建置 Vue3 + Vite + Ts 的專案過程中使用的方法：</p>\n<h1 id=\"快速建置專案\"><a href=\"#快速建置專案\" class=\"headerlink\" title=\"快速建置專案\"></a>快速建置專案</h1> <figure class=\"highlight bash hljs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-comment\"># npm 6.x</span></span><br><span class=\"line\">npm create vite@latest my-vue-app --template vue</span><br></pre></td></tr></tbody></table></figure>\n  <figure class=\"highlight bash hljs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-built_in\">cd</span> my-project</span><br><span class=\"line\">npm install</span><br><span class=\"line\">npm run dev</span><br></pre></td></tr></tbody></table></figure>\n<h1 id=\"使用-ant-design-vue-UI\"><a href=\"#使用-ant-design-vue-UI\" class=\"headerlink\" title=\"使用 ant design vue UI\"></a>使用 ant design vue UI</h1><p>  antd 的介面優雅簡約個人滿喜歡的，配色切換的設定也很方便</p>\n<ul>\n<li><p>安裝套件</p>\n  <figure class=\"highlight bash hljs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm i --save ant-design-vue@next</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>新建 libs 資料夾在 src 底下，新增 antdv.ts</p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>antdv.ts</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> type { <span class=\"title class_\">App</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"vue\"</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> <span class=\"title class_\">Antd</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"ant-design-vue\"</span>;</span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> <span class=\"hljs-string\">\"ant-design-vue/dist/antd.less\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">function</span> <span class=\"title function_\">setupAntd</span>(<span class=\"hljs-params\">app: App&lt;Element&gt;</span>): <span class=\"hljs-keyword\">void</span> {</span><br><span class=\"line\">  app.<span class=\"title function_\">use</span>(<span class=\"title class_\">Antd</span>);</span><br><span class=\"line\">}</span><br><span class=\"line\">    </span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>全局入口引用 antd，並且註冊 antd icon</p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>main.ts</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { createApp } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vue'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./App.vue'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { setupAntd } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./libs/antdv\"</span>; <span class=\"hljs-comment\">// 新增++</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> <span class=\"title class_\">Icons</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@ant-design/icons-vue'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> icons :any = <span class=\"title class_\">Icons</span>;</span><br><span class=\"line\"><span class=\"title function_\">setupAntd</span>(app); </span><br><span class=\"line\"><span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// 父組件全局註冊ICONS</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">const</span> i <span class=\"hljs-keyword\">in</span> icons) {</span><br><span class=\"line\">  app.<span class=\"title function_\">component</span>(i, <span class=\"title class_\">Icons</span>[i]);</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"hljs-string\">'#app'</span>)</span><br><span class=\"line\">    </span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>在 vite.config.ts 修改主要配色 primary 變數，這裡踩了很多坑，處理器的設定物件結構一直不對（哭</p>\n</li>\n<li><p>由於 antd 使用的 css 預處理器是不熟悉的 less，無奈一個專案還是選擇一個預處理器就好，只能新學一個寫法來制定自己的全局 css 囉！scss 先放一邊啦。套用全局 css 只需在 additionalData 裡面放置路徑的字串。 </p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>vite.config.ts</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { defineConfig } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vite'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> vue <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@vitejs/plugin-vue'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// https://vitejs.dev/config/</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">default</span> <span class=\"title function_\">defineConfig</span>({</span><br><span class=\"line\">  <span class=\"hljs-attr\">plugins</span>: [<span class=\"title function_\">vue</span>()],</span><br><span class=\"line\">  <span class=\"hljs-attr\">css</span>: {</span><br><span class=\"line\">    <span class=\"hljs-attr\">preprocessorOptions</span>: {</span><br><span class=\"line\">      <span class=\"hljs-attr\">less</span>: {</span><br><span class=\"line\">        <span class=\"hljs-attr\">javascriptEnabled</span>: <span class=\"hljs-literal\">true</span>,</span><br><span class=\"line\">        <span class=\"hljs-attr\">modifyVars</span>: {</span><br><span class=\"line\">          <span class=\"hljs-string\">'primary-color'</span>: <span class=\"hljs-string\">'#94D0C9'</span>,</span><br><span class=\"line\">          <span class=\"hljs-string\">'link-color'</span>: <span class=\"hljs-string\">'red'</span>,</span><br><span class=\"line\">        },</span><br><span class=\"line\">        <span class=\"hljs-attr\">additionalData</span>: <span class=\"hljs-string\">'@import \"./src/assets/style/global.less\";'</span>,</span><br><span class=\"line\">      }</span><br><span class=\"line\">    },</span><br><span class=\"line\">  },</span><br><span class=\"line\">})</span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n<h1 id=\"vuex4-導入與建置-mapStates-模組\"><a href=\"#vuex4-導入與建置-mapStates-模組\" class=\"headerlink\" title=\"vuex4 導入與建置 mapStates 模組\"></a>vuex4 導入與建置 mapStates 模組</h1><ul>\n<li><p>安裝 vuex4</p>\n  <figure class=\"highlight bash hljs\"><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install vuex@next</span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>全局入口引用 vuex，多了一把<strong>鑰匙（key）</strong>需要設置並且傳入 <strong>useStore()</strong> 中才能啟用 vuex，鑰匙的型態是 symbol()</p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>main.ts</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { createApp } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vue'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> <span class=\"title class_\">App</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./App.vue'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { setupAntd } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">\"./libs/antdv\"</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> * <span class=\"hljs-keyword\">as</span> <span class=\"title class_\">Icons</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'@ant-design/icons-vue'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { store, key } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'./store/store'</span> <span class=\"hljs-comment\">// 新增++</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> app = <span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"><span class=\"hljs-keyword\">const</span> icons :any = <span class=\"title class_\">Icons</span>;</span><br><span class=\"line\">app.<span class=\"title function_\">use</span>(store, key) <span class=\"hljs-comment\">// 新增++</span></span><br><span class=\"line\"><span class=\"title function_\">setupAntd</span>(app); </span><br><span class=\"line\"><span class=\"title function_\">createApp</span>(<span class=\"title class_\">App</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// 父組件全局註冊ICONS</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">for</span>(<span class=\"hljs-keyword\">const</span> i <span class=\"hljs-keyword\">in</span> icons) {</span><br><span class=\"line\">  app.<span class=\"title function_\">component</span>(i, <span class=\"title class_\">Icons</span>[i]);</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\">app.<span class=\"title function_\">mount</span>(<span class=\"hljs-string\">'#app'</span>)</span><br><span class=\"line\">    </span><br></pre></td></tr></tbody></table></figure></li>\n<li><p>撰寫 vuex 配置檔案，為了方便後續使用模組導入 mapStates 的方式，統一放在 src 底下的資料夾 store 內：</p>\n<img src=\"/images/vue3-vite-ts/01.png\" class=\"\" width=\"800\" height=\"200\" title=\"[Vue3 [Vue3]]\"></li>\n<li><p>與 vuex3寫法上的不同點：<br>以前使用 new Store()，vuex4改用 createStore() 建立倉庫。</p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>store.ts</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"hljs-keyword\">import</span> { <span class=\"title class_\">InjectionKey</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vue'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> { createStore, <span class=\"title class_\">Store</span> } <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'vuex'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> axios <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'axios'</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">import</span> <span class=\"title class_\">ApiClient</span> <span class=\"hljs-keyword\">from</span> <span class=\"hljs-string\">'../ApiClient'</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// 为 store state 声明类型</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">export</span> interface <span class=\"title class_\">State</span> {</span><br><span class=\"line\">  <span class=\"hljs-attr\">count</span>: number</span><br><span class=\"line\">}</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-comment\">// 定义 injection key</span></span><br><span class=\"line\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> <span class=\"hljs-attr\">key</span>: <span class=\"title class_\">InjectionKey</span>&lt;<span class=\"title class_\">Store</span>&lt;<span class=\"title class_\">State</span>&gt;&gt; = <span class=\"title class_\">Symbol</span>()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"hljs-keyword\">export</span> <span class=\"hljs-keyword\">const</span> store = createStore&lt;<span class=\"title class_\">State</span>&gt;({</span><br><span class=\"line\">  <span class=\"hljs-attr\">state</span>: {</span><br><span class=\"line\">    <span class=\"hljs-attr\">count</span>: <span class=\"hljs-number\">0</span></span><br><span class=\"line\">  },</span><br><span class=\"line\">  <span class=\"hljs-attr\">getters</span>: {</span><br><span class=\"line\">  },</span><br><span class=\"line\">  <span class=\"hljs-attr\">mutations</span>: {</span><br><span class=\"line\">  },</span><br><span class=\"line\">  <span class=\"hljs-attr\">actions</span>: {</span><br><span class=\"line\">  },</span><br><span class=\"line\">})</span><br><span class=\"line\">    </span><br></pre></td></tr></tbody></table></figure>\n</li>\n<li><p>在 Vue3.x 版本中使用 vuex4 需要透過 useStore() 方法才能訪問 store 內容：</p>\n<figure class=\"highlight javascript hljs\"><figcaption><span>store.ts</span></figcaption><table><tbody><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">      </span><br><span class=\"line\">    </span><br></pre></td></tr></tbody></table></figure></li>\n</ul>\n</body></html>",
            "tags": [
                "vue3",
                "vite",
                "typescript"
            ]
        }
    ]
}