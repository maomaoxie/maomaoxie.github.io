<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head>
    <meta charset="utf-8">
<title>Mawchu 貓奴前端的天空</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="google-site-verification" content="qpdwAFMt_HNGP0dM45CxVBDie_HVPkWFvpclpqZaoIo" />
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">


<link href="/en/page/7/index.html" rel="alternate" hreflang="en" />
    


<meta name="description" content="Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習">



<meta name="keywords" content="mawchu、謝佳芳、毛球、網頁、前端、Javascript、Vue、Laravel、SEO、平面設計、貓咪">



    <meta name="description" content="Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習">
<meta property="og:type" content="website">
<meta property="og:title" content="Mawchu 貓奴前端的天空">
<meta property="og:url" content="http://maomaoxie.github.io/page/7/index.html">
<meta property="og:site_name" content="Mawchu 貓奴前端的天空">
<meta property="og:description" content="Mawchu 貓奴前端，為熱愛平面設計與貓咪的前端工程師 - 謝佳芳（毛球）的技術部落格，喜歡撰寫技術文章幫助自己在前端之路成長，涉及 Javascript、Vue、Laravel 與其他程式相關的討論與學習">
<meta property="og:locale" content="zh_TW">
<meta property="article:author" content="Mawchu 謝佳芳">
<meta property="article:tag" content="mawchu、謝佳芳、毛球、網頁、前端、Javascript、Vue、Laravel、SEO、平面設計、貓咪">
<meta name="twitter:card" content="summary">



<link rel="alternative" href="/atom.xml" title="Mawchu 貓奴前端的天空" type="application/atom+xml">



<link rel="icon" type="image/x-icon" href="/favicon.svg">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">

<!-- AdSense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8832218493331944" crossorigin="anonymous"></script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">



<link rel="stylesheet" href="/css/style.css">


<script src="https://kit.fontawesome.com/76e3351334.js" crossorigin="anonymous"></script>


    
    
    
    
    
    
    
    
    
    

    


<meta name="generator" content="Hexo 6.0.0"></head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container custom-nav">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo position-relative" href="/">
                
                <img src="/images/logo.png" alt="" height="28">
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item "
               href="/archives">文章
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/categories">分類
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/tags">標籤
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/zh-tw/about">關於
               <div class="position-absolute bar"></div>
            </a>
            
            <a class="navbar-item "
               href="/zh-tw/subscribe">訂閱
               <div class="position-absolute bar"></div>
            </a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="搜尋" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" target="_blank" rel="noopener" href="https://github.com/mawchu">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2022/08/18/zh-tw/safari-preventDefault-bug/" itemprop="url">Safari IOS 11.3 後 preventDefault 失效問題</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-08-18T01:12:34.000Z" itemprop="datePublished">8月 18 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            6 分鐘 讀完 (約 939 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <!-- <html><head></head><body><img src="https://i.gifer.com/2BC.gif" class="" width="300" height="200" title="safari-preventDefault-bug">
<p>沒錯的，我們可愛的 Safari 又又又出現了 bug，來看看這個高級 IE 的除錯日常（Safari 愛好者不要鞭我）</p>
<h1 id="click-事件綁定"><a href="#click-事件綁定" class="headerlink" title="click 事件綁定"></a>click 事件綁定</h1><p>網站開發過程的需求是，當元件沒有 props 連結路徑時就預防 a 連結的預設跳轉行為，以下是元件的 code：</p>
<figure class="highlight plaintext hljs"><figcaption><span>component</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// HTML</span><br><span class="line">&lt;a class="w-100 h-100" :class="[ url === '' ? 'pointer-events-none' : 'url-active' ]" @click="changeTab()"&gt;</span><br><span class="line">&lt;/a&gt;</span><br><span class="line">// Script</span><br><span class="line">&lt;script&gt;</span><br><span class="line">@Component</span><br><span class="line">export default class ItemCard extends Vue {</span><br><span class="line">    @Prop({ default: '' }) url?: string;</span><br><span class="line">    private changeTab (event: any) {</span><br><span class="line">        if (this.url === '') {</span><br><span class="line">        event.preventDefault();</span><br><span class="line">        }</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></tbody></table></figure>

<h1 id="contextmenu-事件綁定"><a href="#contextmenu-事件綁定" class="headerlink" title="contextmenu 事件綁定"></a>contextmenu 事件綁定</h1><p>後來發現 Safari 的瀏覽器，手機與電腦綁定 a 標籤 click 事件都無法達到避免預設行為的效果，於是求救谷歌大神：</p>
<blockquote><p>To target right click events, use contextmenu rather than mousedown.</p>
<p><code>document.querySelector("#GL-Surface").addEventListener("contextmenu",     function(e) {         e.preventDefault();     }); </code><br>Note that the options that appear on right click do appear only when the right click button is released, so I don’t think mousedown is at all suitable here.</p>
<p><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/62245019/javascript-preventdefault-not-working-in-safari">Javascript preventDefault() not working in Safari</a></p>
</blockquote>

<p>這裡面提及的<strong>contextmenu</strong>事件是右鍵出現的選單，抱持著嘗試看看的心情監聽contextmenu事件，並綁定了一樣的函式．竟然成功了？？？</p>
<p>第一次看到這個<strong>contextmenu</strong>事件，來瞧瞧 MDN 怎麼說：</p>
<blockquote><p>被触发的 contextmenu 事件的默认行为被 preventDefault() 取消了，因此，在第一段右击鼠标时什么也不会发生<br><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTML/Global_attributes/contextmenu">contextmenu</a></p>
</blockquote>

<h1 id="ios11-3-版本後"><a href="#ios11-3-版本後" class="headerlink" title="ios11.3 版本後"></a>ios11.3 版本後</h1><p>有人提及<strong>ios11.3 and later</strong>預設行為就失效了</p>
<blockquote><p>This is not an issue by React and is caused by the recent movement of browser vendors to improve performance on mobile devices.<br>Some events (usually those that would fire when you scroll) are <strong>getting passive by default</strong>.<br><a target="_blank" rel="noopener" href="https://github.com/facebook/react/issues/13369">e.preventDefault() does not work with safari in ios11.3 and later #13369</a></p>
</blockquote>

<h1 id="改動是為了優化體驗"><a href="#改動是為了優化體驗" class="headerlink" title="改動是為了優化體驗"></a>改動是為了優化體驗</h1><p>以上的說明原由來自於性能優化的考量，由於手機裝置在滾動時觸發太多主動事件會嚴重影響體驗，因故某些事件都被調整預設為<strong>被動的（passive）</strong>，來看看以下說明：<br>（附上不負責任翻譯）</p>
<blockquote><p>We know that scrolling responsiveness is critical to the user’s engagement with a website on mobile, yet touch event listeners often cause serious scrolling performance problems.<br>在手機裝置中滾動事件的敏感度放大了使用者的體驗，可能造成延遲或性能不好。</p>
<p>Chrome has been addressing this by allowing touch event listeners to be passive (passing the {passive: true} option to addEventListener()) and shipping the pointer events API. These are great features to drive new content into models that don’t block scrolling, but developers sometimes find them hard to understand and adopt.<br>Chrome 在事件監聽上預設了被動參數為 true，避免滾動事件被阻擋。</p>
<p>Developer-defined “passive event listeners” solve this. When you add a touch event with a {passive: true} object as the third parameter in your event handler then you are telling the browser that the touchstart listener will not call preventDefault() and the browser can safely perform the scroll without blocking on the listener.<br>當你設定事件監聽被動參數為 true，該事件就不會觸發**preventDefault()**避免滾動事件卡卡的</p>
<p><a target="_blank" rel="noopener" href="https://developer.chrome.com/blog/scrolling-intervention/">Making touch scrolling fast by default</a></p>
</blockquote>

<p>設定的方式與參數例如這樣：<br><code>window.addEventListener("touchstart", func, {passive: true} );</code></p>
<h1 id="弔詭的地方"><a href="#弔詭的地方" class="headerlink" title="弔詭的地方"></a>弔詭的地方</h1><ol>
<li>以上說明是針對 Chrome 瀏覽器的性能優化改動，不是 safari 啊？</li>
<li>MDN 提及 contextmenu 事件已經不為瀏覽器所支援，但 safari 卻必須使用 contextmenu 事件綁定並且搭配 preventDefault 才能生效？而且註明 safari ios 是唯一不支援此事件的瀏覽器？</li>
</ol>
<img src="/images/safari-preventDefault-bug/0.png" class="" width="800" height="200" title="safari-preventDefault-bug">
<img src="https://c.tenor.com/sAMt7DszgXMAAAAC/%E9%BB%91%E4%BA%BA%E5%95%8F%E8%99%9F.gif" class="" width="350" height="200" title="safari-preventDefault-bug">

<p>也許下次可以試試看直接把監聽器的 passive 設為 false 試試看 XD</p>
</body></html> -->
        
        
        <html><head></head><body><img src="https://i.gifer.com/2BC.gif" class="" width="300" height="200" title="safari-preventDefault-bug">
<p>沒錯的，我們可愛的 Safari 又又又出現了 bug，來看看這個高級 IE 的除錯日常（Safari 愛好者不要鞭我）</p>
            <!--  -->
            <p class="article-more-link">
                <a href="/2022/08/18/zh-tw/safari-preventDefault-bug/">more</a>
            </p>
        
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2022/08/17/zh-tw/js-object-fromEntries/" itemprop="url">Js 物件陣列轉換的方法，真香！</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-08-17T02:22:19.000Z" itemprop="datePublished">8月 17 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            2 分鐘 讀完 (約 369 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <!-- <html><head></head><body><img src="https://exp-picture.cdn.bcebos.com/3201a8f39187031c063126496a86242fa972ec4a.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_auto/quality,q_80" class="" width="300" height="200" title="真香">
<p><a target="_blank" rel="noopener" href="https://exp-picture.cdn.bcebos.com/3201a8f39187031c063126496a86242fa972ec4a.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_auto/quality,q_80">圖片來源</a></p>
<p>今天來介紹一下資料處理的好兄弟，<code>Object.entries</code> 以及 <code>Object.fromEntries</code>。</p>
<p>工作上的需求情境是這樣：<br>一個物件裡有多個 key，但我只需要複製部份的 key 資料，不用全部時可以使用以下作法。</p>
<h1 id="Object-entries"><a href="#Object-entries" class="headerlink" title="Object.entries"></a>Object.entries</h1><p>工作上的老朋友，常用在物件轉換成陣列時使用，方法特色是將物件內的 key 與 value 轉變成一個<strong>成對的陣列</strong>。</p>
<figure class="highlight javascript hljs"><figcaption><span>Object.entries</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> obj = {</span><br><span class="line"><span class="hljs-attr">fruits</span>: <span class="hljs-string">'apple'</span>,</span><br><span class="line"><span class="hljs-attr">beverage</span>: <span class="hljs-string">'choco milk'</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> outcome = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(outcome);</span><br><span class="line"><span class="hljs-comment">// [</span></span><br><span class="line">    [ <span class="hljs-string">'fruits'</span>, <span class="hljs-string">'apple'</span> ],</span><br><span class="line">    [ <span class="hljs-string">'beverage'</span>, <span class="hljs-string">'choco milk'</span> ],</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>

<h1 id="Object-fromEntries"><a href="#Object-fromEntries" class="headerlink" title="Object.fromEntries"></a>Object.fromEntries</h1><p>跟上面的相反，常用在陣列轉換成物件時使用，方法特色是將成對的 key 與 value 轉變成一個<strong>物件</strong>。</p>
<figure class="highlight javascript hljs"><figcaption><span>Object.fromEntries</span></figcaption><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> obj = {</span><br><span class="line"><span class="hljs-attr">fruits</span>: <span class="hljs-string">'apple'</span>,</span><br><span class="line"><span class="hljs-attr">beverage</span>: <span class="hljs-string">'choco milk'</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> entries = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="hljs-string">'entries'</span>, entries);</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> fromEntries = <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(entries);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="hljs-string">'fromEntries'</span>, fromEntries);</span><br></pre></td></tr></tbody></table></figure>

<h1 id="綜合應用"><a href="#綜合應用" class="headerlink" title="綜合應用"></a>綜合應用</h1><p>回到主題，若只需要複製部份的 key 資料可以結合 filter 過濾需要的 key 值：</p>
<figure class="highlight javascript hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">const</span> obj = {</span><br><span class="line"><span class="hljs-attr">fruits</span>: <span class="hljs-string">'apple'</span>,</span><br><span class="line"><span class="hljs-attr">beverage</span>: <span class="hljs-string">'choco milk'</span></span><br><span class="line">};</span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> onlyBeverage = <span class="title class_">Object</span>.<span class="title function_">entries</span>(obj).<span class="title function_">filter</span>(<span class="hljs-function">(<span class="hljs-params">[key, value]</span>) =&gt;</span> key === <span class="hljs-string">'beverage'</span>);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(onlyBeverage);</span><br><span class="line"><span class="hljs-comment">// ['beverage', 'choco milk']</span></span><br><span class="line"></span><br><span class="line"><span class="hljs-keyword">const</span> transferArrayToObject = <span class="title class_">Object</span>.<span class="title function_">fromEntries</span>(onlyBeverage);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">log</span>(transferArrayToObject);</span><br><span class="line"><span class="hljs-comment">// { 'beverage': 'choco milk' }</span></span><br></pre></td></tr></tbody></table></figure>

<p>參考資料<a target="_blank" rel="noopener" href="https://masteringjs.io/tutorials/fundamentals/filter-key">在這</a></p>
</body></html> -->
        
        
        <html><head></head><body><img src="https://exp-picture.cdn.bcebos.com/3201a8f39187031c063126496a86242fa972ec4a.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_auto/quality,q_80" class="" width="300" height="200" title="真香">
<p><a target="_blank" rel="noopener" href="https://exp-picture.cdn.bcebos.com/3201a8f39187031c063126496a86242fa972ec4a.jpg?x-bce-process=image/resize,m_lfit,w_500,limit_1/format,f_auto/quality,q_80">圖片來源</a></p>
            <!--  -->
            <p class="article-more-link">
                <a href="/2022/08/17/zh-tw/js-object-fromEntries/">more</a>
            </p>
        
    
    </div>
    
    
</article>




    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2022/08/09/zh-tw/http-methods-idempotent/" itemprop="url">RESTful API 方法觀念介紹 - idempotent</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            
                <time datetime="2022-08-09T07:14:24.000Z" itemprop="datePublished">8月 9 2022</time>
            
        </span>
        
        
        <span class="column is-narrow">
            
            
            8 分鐘 讀完 (約 1140 字)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <!-- <html><head></head><body><p>RESTful API 呼叫的方法中，離不開四個主軸 CRUD，CREATE、READ/RETREIVE、UPDATE 還有 DELETE。<br>而其中就有分是否為 <strong>Idempotent 的方法</strong>，甚麼意思呢？</p>
<h1 id="甚麼是Idempotent（冪等）"><a href="#甚麼是Idempotent（冪等）" class="headerlink" title="甚麼是Idempotent（冪等）"></a>甚麼是Idempotent（冪等）</h1><blockquote><p>A request method is considered “idempotent” if the intended effect on the server of multiple identical requests with that method is the same as the effect for a single such request. </p>
</blockquote>

<p>看為只覺得在母鯊大，沒關係我們繼續看下去：</p>
<blockquote><p>Of the request methods defined by this specification, PUT, DELETE, and safe request methods are idempotent.</p>
<footer><strong>Lauviah0622</strong><cite><a target="_blank" rel="noopener" href="https://lance.coderbridge.io/2021/06/06/what-is-safe-method-and-indempotent-methods/">[極短篇] HTTP 的 Safe method 還有 Idempotent method</a></cite></footer></blockquote>

<p>dempotent（冪等）的方法不管你做一次、兩次乃至一百次，對於伺服器端資料的結果都一樣，是安全而沒有副作用的，可以安心服用；<br>相反的非 Idempotent 的方法則是需要謹慎考慮的、會改動伺服器資料庫的、有副作用的，也就是非安全請求。</p>
<p>我們來看看更精簡好懂的解釋：</p>
<blockquote><p>Idempotent operations produce the same result even when the operation is repeated many times. The result of the 2nd, 3rd, and 1,000th repeat of the operation will return exactly the same result as the 1st time.<br>冪等運算是指無論操作多少次結果都會與第一次相同。</p>
<p>For example, simple mathematical examples of idempotency include:</p>
<p>x + 0;<br>x = 5;</p>
<p>In the first example, adding zero will never change the result, regardless of how many times you do it. In the second, x is always 5. Again, this is the case, regardless of how many times you perform the operation. Both of these examples describe an operation that is idempotent.</p>
<p>以上兩個例子都說明了這兩個表達是無論執行幾次都會是相同結果，這就是 Idempotent（冪等）。</p>
<footer><strong>James E.</strong><cite><a target="_blank" rel="noopener" href="https://blog.dreamfactory.com/what-is-idempotency/">what-is-idempotency</a></cite></footer></blockquote>

<h1 id="冪等不等於安全請求"><a href="#冪等不等於安全請求" class="headerlink" title="冪等不等於安全請求"></a>冪等不等於安全請求</h1><blockquote><p>The concepts of ‘idempotent methods’ and ‘safe methods’ are often confused. A safe method does not change the value that is returned, it reads – but it never writes.<br>Therefore, all safe methods are idempotent, but not all idempotent methods are safe.</p>
<p>HTTP methods include:<br>POST – Creates a new resource. POST is not idempotent and it is not safe.<br>GET – Retrieves a resource. GET is idempotent and it is safe.<br>HEAD – Retrieves a resource (without response body). HEAD is idempotent and it is safe<br>PUT – Updates/replaces a resource. PUT is idempotent but it is not safe<br>PATCH – Partially updates a resource. PATCH is not idempotent and it is not safe.<br>DELETE – Deletes a resource. DELETE is idempotent but it is not safe.<br>TRACE – Performs a loop-back test. TRACE is idempotent but it is not safe.</p>
<footer><strong>James E.</strong><cite><a target="_blank" rel="noopener" href="https://blog.dreamfactory.com/what-is-idempotency/">what-is-idempotency</a></cite></footer></blockquote>

<p>安全請求只會讀取，所以都是冪等的，但冪等方法不一定都是安全請求。</p>
<p>學術的部份我們就此打住，了解一下冪等之於 RESTful API 的意義。</p>
<h1 id="idempotent-methods-冪等的方法"><a href="#idempotent-methods-冪等的方法" class="headerlink" title="idempotent methods 冪等的方法"></a>idempotent methods 冪等的方法</h1><ol>
<li>GET</li>
<li>HEAD（只讀取資料頭而忽略身體）</li>
<li>PUT</li>
<li>DELETE</li>
<li>OPTIONS</li>
</ol>
<p>以上方式無論發幾次 request，結果都等同於一次。</p>
<blockquote><p>通常 DELETE 會帶上 id，所以刪除 1 次和刪除 100 次是一樣的，server 那邊找不到 id 操作就會被忽略。<br>而 PUT 也一樣，PUT 代表替代的 http 操作，你發了 1 次 request 已經取代了內容後，那即使再發 100 次也只是替代一樣的內容。</p>
<footer><strong>Lauviah0622</strong><cite><a target="_blank" rel="noopener" href="https://lance.coderbridge.io/2021/06/06/what-is-safe-method-and-indempotent-methods/">[極短篇] HTTP 的 Safe method 還有 Idempotent method</a></cite></footer></blockquote>

<h1 id="Not-idempotent-methods-非冪等的方法"><a href="#Not-idempotent-methods-非冪等的方法" class="headerlink" title="Not idempotent methods 非冪等的方法"></a>Not idempotent methods 非冪等的方法</h1><ol>
<li>POST</li>
<li>DISPATCH</li>
</ol>
<p>以上方法每執行一次就會造成資料變動，但並非每種使用方式都是非冪等，端看 request 的目的是在「修改」還是「增加」，修改可能並不會更改內存量（memory），但是增加就不同了，它也是修改但是擴大了內存量（變多了）：</p>
<blockquote><p>PATCH 在語意上代表著修改資料，換句話說可能這樣：</p>
<p><code>PATCH http://blog.com/post?id=1 body {     title: 'new title' } </code><br>發了 100 次和 1 次標題都是同樣的 new title。</p>
<p><code>PATCH http:shop.com/item/add?id=1 body {     number: 10 }</code><br>requst 代表的是增加 10 個 item 的數量。這種情況下也符合語意（修改資料），但就不符合 Idempotent 了，100 次會新增 1000 個。那 POST 就不用提，一次和 100 次肯定是不一樣的。</p>
<footer><strong>Lauviah0622</strong><cite><a target="_blank" rel="noopener" href="https://lance.coderbridge.io/2021/06/06/what-is-safe-method-and-indempotent-methods/">[極短篇] HTTP 的 Safe method 還有 Idempotent method</a></cite></footer></blockquote>

<h1 id="結語"><a href="#結語" class="headerlink" title="結語"></a>結語</h1><p>讓我最意外的是 DELETE 居然是冪等方法，原因在於無論 request 幾次都只刪同一筆資料（認 id）這個觀念，與以前認為 DELETE 應該會每次刪除不同資料的想法大相逕庭。</p>
</body></html> -->
        
        
        <html><head></head><body><p>RESTful API 呼叫的方法中，離不開四個主軸 CRUD，CREATE、READ/RETREIVE、UPDATE 還有 DELETE。<br>而其中就有分是否為 <strong>Idempotent 的方法</strong>，甚麼意思呢？</p>
<h1 id="甚麼是Idempotent（冪等）"><a href="#甚麼是Idempotent（冪等）" class="headerlink" title="甚麼是Idempotent（冪等）"></a>甚麼是Idempotent（冪等）</h1><blockquote><p>A request method is considered “idempotent” if the intended effect on the server of multiple identical requests with that method is the same as the effect for a single such request. </p>
            <!--  -->
            <p class="article-more-link">
                <a href="/2022/08/09/zh-tw/http-methods-idempotent/">more</a>
            </p>
        
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous">
        <a href="/page/6/">
            
            <i class="fas fa-caret-left"></i>
            prev
        </a>
    </div>
    <div class="pagination-next">

        <a href="/page/8/">
            next
            <i class="fas fa-caret-right"></i>
        </a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link" href="/">1</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/6/">6</a></li>
        
        <li><a class="pagination-link is-current" href="/page/7/">7</a></li>
        
        <li><a class="pagination-link" href="/page/8/">8</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/21/">21</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2022 Mawchu 謝佳芳&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a
                        target="_blank" rel="noopener" href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" target="_blank" rel="noopener" href="https://github.com/mawchu">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
<div class="column is-narrow has-text-centered">
    <div class="dropdown is-up is-right is-hoverable" style="margin-top: -0.2em;">
        <div class="dropdown-trigger">
            <button class="button is-small" aria-haspopup="true" aria-controls="dropdown-menu7">
                <span class="icon">
                    <i class="fas fa-globe"></i>
                </span>
                <span>繁體中文</span>
                <span class="icon is-small">
            <i class="fas fa-angle-down" aria-hidden="true"></i>
          </span>
            </button>
        </div>
        <div class="dropdown-menu has-text-left" role="menu">
            <div class="dropdown-content">
            
                <a href="/page/7/index.html" class="dropdown-item">
                    繁體中文
                </a>
            
                <a href="/en/page/7/index.html" class="dropdown-item">
                    English
                </a>
            
            </div>
        </div>
    </div>
</div>

        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" target="_blank" rel="noopener" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("zh-TW");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {
            matchFontHeight: false
        },
        SVG: {
            matchFontHeight: false
        },
        CommonHTML: {
            matchFontHeight: false
        },
        tex2jax: {
            inlineMath: [
                ['$','$'],
                ['\\(','\\)']
            ]
        }
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
          position: relative;
        }

        .hljs .clipboard-btn {
          float: right;
          color: #9a9a9a;
          background: none;
          border: none;
          cursor: pointer;
          font-family: 'Noto Sans TC', sans-serif;
          
          transition: ease-in-out .3s;
          transform: scale(.9);
        }

        .hljs .clipboard-btn:hover {
          color: #2e2e2e;
          transform: scale(1.1);
        }

        .hljs > .clipboard-btn {
          display: none;
          position: absolute;
          right: 4px;
          top: 4px;
        }

        .hljs:hover > .clipboard-btn {
          display: inline;
        }

        button {
          padding: 0;
        }

        figure.highlight .gutter {
          background-color: #d6e1e4;
        }

        .gutter span {
          color: white;
        }

    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button><i class="fas fa-copy"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
        clipboard.on('success', function(e) {
          e.clearSelection();
        })
      })
    </script>

    
    

    



<script src="/js/script.js"></script>


    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="站內搜尋" />
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: '文章',
                PAGES: '頁面',
                CATEGORIES: '分類',
                TAGS: '標籤',
                UNTITLED: '(無標題)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>

<script src="/js/insight.js"></script>

    
</body>
</html>